package sgtmelon.scriptum.test.control.notification

import androidx.test.ext.junit.runners.AndroidJUnit4
import org.junit.Test
import org.junit.runner.RunWith
import sgtmelon.scriptum.domain.model.item.NoteItem
import sgtmelon.scriptum.test.ParentNotificationTest

/**
 * Test of notification open from status bar
 */
@RunWith(AndroidJUnit4::class)
class OpenTest : ParentNotificationTest() {

    // TODO finish

    @Test fun openTextNote() = data.insertText(data.textNote.copy(isStatus = true)).let {
        notifyNote(it)

        launch { onOpen { openTextNoteBind(it) { onPressBack() }.mainScreen() } }
    }

    @Test fun openRollNote() = data.insertRoll(data.rollNote.copy(isStatus = true)).let {
        notifyNote(it)

        launch { onOpen { openRollNoteBind(it) { onPressBack() }.mainScreen() } }
    }

    private fun notifyNote(item: NoteItem) {
        val sort = preferenceRepo.sort
//        bindControl.notifyNote(item, listOf(), sort)
    }


    @Test fun openInfo() = data.insertNotification().let {
        bindControl.notifyCount(count = 1)
        launch { onOpen { openNotification { onPressBack() }.mainScreen() } }
    }

}